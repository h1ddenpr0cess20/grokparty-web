@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme (balanced, accessible) */
    --color-background: 210 20% 98%; /* slate-50 */
    --color-surface: 0 0% 100%;      /* white */
    --color-border: 215 16% 82%;     /* slate-300 */
    --color-foreground: 222 47% 11%; /* slate-900 */
    --color-primary: 262 83% 58%;    /* violet-600 */
    --color-secondary: 173 80% 38%;  /* teal-600 */
    --color-success: 152 76% 40%;    /* emerald-600 */
    --color-warning: 38 92% 50%;     /* amber-500 */
    --color-danger: 346 75% 56%;     /* rose-600 */
    --color-muted: 215 20% 45%;      /* slate-600 */
  }

  :root[data-theme="dark"] {
    /* Dark theme tuned for contrast */
    --color-background: 222 47% 7%;  /* slate-950 */
    --color-surface: 222 36% 13%;    /* slate-900-ish */
    --color-border: 215 30% 28%;     /* slate-700 */
    --color-foreground: 210 20% 92%; /* slate-200 */
    --color-primary: 262 83% 67%;    /* violet-500/400 range */
    --color-secondary: 173 80% 46%;  /* teal-500 */
    --color-success: 152 65% 52%;    /* emerald-500 */
    --color-warning: 43 96% 55%;     /* amber-400 */
    --color-danger: 346 75% 65%;     /* rose-500 */
    --color-muted: 210 20% 70%;      /* slate-300 */
  }

  *,
  *::before,
  *::after {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    margin: 0;
    min-height: 100vh;
    font-feature-settings: "liga" 1, "kern" 1;
  }

  #root {
    min-height: 100vh;
  }
}

@layer components {
  .glass-panel {
    @apply border border-border bg-surface shadow-card dark:border-border/70 dark:bg-surface;
  }

  .markdown-body {
    @apply leading-relaxed break-words;
  }

  .markdown-body > * {
    margin-bottom: 0.75rem;
  }

  .markdown-body > *:last-child {
    margin-bottom: 0;
  }

  .markdown-body p {
    @apply whitespace-pre-wrap;
  }

  .markdown-body ul,
  .markdown-body ol {
    @apply pl-5;
  }

  .markdown-body ul {
    @apply list-disc space-y-1;
  }

  .markdown-body ol {
    @apply list-decimal space-y-1;
  }

  .markdown-body li {
    text-indent: 0;
  }

  .markdown-body blockquote {
    @apply border-l-4 border-border/60 pl-4 italic;
  }

  .markdown-body hr {
    @apply border-border/60;
  }

  .markdown-body pre {
    @apply overflow-x-auto rounded-xl bg-border/20 p-4;
  }

  .markdown-body code {
    @apply rounded-md bg-border/30 px-1.5 py-0.5 font-mono text-xs;
  }

  .markdown-body pre code {
    @apply bg-transparent p-0;
  }

  .citation-link {
    @apply font-semibold text-primary underline decoration-primary/60 underline-offset-2 hover:decoration-primary;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .custom-scroll {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--color-border) / 0.5) transparent;
  }

  .custom-scroll::-webkit-scrollbar {
    width: 0.4rem;
  }

  .custom-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scroll::-webkit-scrollbar-thumb {
    background: hsl(var(--color-border) / 0.5);
    border-radius: 9999px;
  }

  .custom-scroll::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--color-border) / 0.7);
  }

  .transcript-scroll {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--color-border) / 0.6) transparent;
  }

  .transcript-scroll::-webkit-scrollbar {
    width: 0.5rem;
  }

  .transcript-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .transcript-scroll::-webkit-scrollbar-thumb {
    background: hsl(var(--color-border) / 0.6);
    border-radius: 9999px;
    border: 2px solid transparent;
    background-clip: content-box;
  }

  .transcript-scroll::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--color-border) / 0.8);
    background-clip: content-box;
  }
}
